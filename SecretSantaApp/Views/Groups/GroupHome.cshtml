@model GroupHomeEditModel
@{
//var inviteurl = Url.Action("GetInviteUsersFields", "Groups", new { count = -1 });
}

<div style="text-align:center">
  <span> <img src="~/images/smNorthPole.png" alt="NorthPole" class="img-circle" style="display: inline !important"></span>
  <h3 style="display:inline!important">Welcome to Group: @Model.GroupName</h3>
  <span> <img src="~/images/smNorthPole.png" alt="NorthPole" class="img-circle" style="display: inline !important"></span>
</div>

@if (Model.NewGroup)
{
  <div class="container">
    <div class="row">
      <form asp-controller="Groups" asp-action="SendInvitesTousers" method="POST" class="form-horizontal" role="form">

        <div class="col-xs-12" style="outline: 1px blue solid; text-align: center">
          <label>Invite People To Play!</label> <br />
          <div class="btn-group btn-toggle">

            <button class="btn btn-default" data-toggle="collapse" data-target="#collapsible">Phone</button>
            <button class="btn btn-primary active" data-toggle="collapse" data-target="#collapsible">Email</button>
          </div>
        </div>

        <div class="clearfix"></div>

        <div class="col-xs-12">

          @for (var i = 0; i < Model.InviteUsersCollection.UsersToInvite.Count; i++)
          {
            <div id="invitefields">
              <div class="form-group col-xs-6" style="outline: 1px green solid">
                <label asp-for="@Model.InviteUsersCollection.UsersToInvite[i].Name" class="col-md-2 control-label"></label>
                <input asp-for="@Model.InviteUsersCollection.UsersToInvite[i].Name" class="form-control" />
                <span asp-validation-for="@Model.InviteUsersCollection.UsersToInvite[i].Name" class="text-danger"></span>
              </div>

              <div class="form-group col-xs-6" style="outline: 1px red solid">
                <label asp-for="@Model.InviteUsersCollection.UsersToInvite[i].Email" class="col-md-2 control-label"></label>
                <input asp-for="@Model.InviteUsersCollection.UsersToInvite[i].Email" class="form-control" />
                <span asp-validation-for="@Model.InviteUsersCollection.UsersToInvite[i].Email" class="text-danger"></span>
              </div>
            </div>

          }
        </div>

        <div class="clearfix"></div>

        <div class="clearfix"></div>
        <div class="col-xs-10 col-sm-4 col-md-4 col-lg-4">
          <button id="btnInviteMoreUsers" type="button" class="btn btn-default" onclick="">Invite More People</button>
          <button type="submit" class="btn btn-default">Submit</button>
        </div>

      </form>

      <div class="clearfix"></div>

      <br /><br />
    </div>
  </div>

}
else //its just the standard group home
{
  <div>
    @if (Model.GroupMembers.Count > 0)
    {
      <h4>Say Hello To Your Members:</h4>

      <div class="row">
        <table class="table table-responsive table-striped">
          <thead>
          <tr>
            <th>&nbsp;</th>
            <th>Name</th>
            <th>Email</th>

          </tr>
          </thead>
          <tbody>
            @foreach (var u in Model.GroupMembers)
          {
            <tr>
              <td>
                <img src="@u.ProfileImage"
                          alt="" class="img-rounded img-responsive"/>
              </td>
              <td>@u.FullName</td>
              <td>@u.Email</td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    }
    else
    {
      <p>No Body Is in this group</p>
    }



  </div>
}




@section scripts{
  <script>
    $(document).ready(function() {

      var isnew = '@Model.NewGroup';
      console.log(isnew);

      if (isnew === "True") {
        console.log("is new: " + isnew);
          var invitecount = "@Model.InviteUsersCollection.UsersToInvite.Count";
          var inviteurl = "@Url.Action("GetInviteUsersFields", "Groups", new {count = -1})";
          var baseurl = inviteurl;

          //Click the add attribute button
          $(function() {
            $("#btnInviteMoreUsers").click(function(e) {
              var resulturl = baseurl.replace("-1", invitecount);

              console.log("urls: " + " - " + resulturl);
              console.log("invitecount: " + invitecount);

              $.get(resulturl,
                function(data) {
                  $("#invitefields").append(data);
                });
              invitecount++;
            }); //end the click
          }); //function
        } //If the group is not new

    }); //doc ready
  </script>
}




@*// $(document).ready(function () {
  //your code here*@
@*var invitecount = '@Model.InviteUsersCollection.UsersToInvite.Count';
  var baseurl = '@inviteurl';





  //Click the add attribute button
  $(function () {

    $("#btnInviteMoreUsers").click(function (e) {
      e.preventDefault();

      console.log("test");
      //var resulturl = baseurl.replace("x-1x", btnclickcount);
      //resulturl = resulturl.replace("x-2x", attributetype);

      //btnclickcount++;

      //$.get(resulturl,
      //  function(data) {
      //    $("#").append(data);
      //  });


    });
  });*@
@*//});*@






<style>
  /*body{
    background-color: #525252;
  }*/
  .centered-form {
    margin-top: 60px;
  }

    .centered-form .panel {
      background: rgba(255, 255, 255, 0.8);
      box-shadow: rgba(0, 0, 0, 0.3) 10px 10px 10px;
    }
</style>
